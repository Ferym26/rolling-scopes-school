!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueMask={})}(this,function(e){"use strict";function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var _="_",D="function",U=[];function z(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}var B=[],F="";function a(e,t,n){var e=0<arguments.length&&void 0!==e?e:F,r=1<arguments.length&&void 0!==t?t:B,t=2<arguments.length&&void 0!==n?n:{};if(!z(r)){if(N(r)!==D)throw new Error("Text-mask:conformToMask; The mask property must be an array.");r=function(e){for(var t,n=[];-1!==(t=e.indexOf("[]"));)n.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:n}}(r=r(e,t)).maskWithoutCaretTraps}var n=t.guide,o=void 0===n||n,n=t.previousConformedValue,i=void 0===n?F:n,n=t.placeholderChar,a=void 0===n?_:n,n=t.placeholder,u=void 0===n?function(e,t){var e=0<arguments.length&&void 0!==e?e:U,n=1<arguments.length&&void 0!==t?t:_;if(!z(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(n))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(n),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map(function(e){return e instanceof RegExp?n:e}).join("")}(r,a):n,n=t.currentCaretPosition,c=t.keepCharPositions,l=!1===o&&void 0!==i,t=e.length,f=i.length,s=u.length,p=r.length,d=t-f,h=0<d,v=n+(h?-d:0),y=v+Math.abs(d);if(!0===c&&!h){for(var g=F,m=v;m<y;m++)u[m]===a&&(g+=a);e=e.slice(0,v)+g+e.slice(v,t)}for(var b=e.split(F).map(function(e,t){return{char:e,isNew:v<=t&&t<y}}),O=t-1;0<=O;O--){var k=b[O].char;k!==a&&k===u[v<=O&&f===p?O-d:O]&&b.splice(O,1)}var w=F,j=!1;e:for(var x=0;x<s;x++){var E=u[x];if(E===a){if(0<b.length)for(;0<b.length;){var P=b.shift(),T=P.char,P=P.isNew;if(T===a&&!0!=l){w+=a;continue e}if(r[x].test(T)){if(!0===c&&!1!==P&&i!==F&&!1!==o&&h){for(var V=b.length,A=null,M=0;M<V;M++){var S=b[M];if(S.char!==a&&!1===S.isNew)break;if(S.char===a){A=M;break}}null!==A?(w+=T,b.splice(A,1)):x--}else w+=T;continue e}j=!0}!1==l&&(w+=u.substr(x,s));break}w+=E}if(l&&!1==h){for(var C=null,R=0;R<w.length;R++)u[R]===a&&(C=R);w=null!==C?w.substr(0,C+1):F}return{conformedValue:w,meta:{someCharsRejected:j}}}function u(e){return e=(t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,function(e){return e.replace("/","?/")})).lastIndexOf("/"),new RegExp(t.slice(1,e),t.slice(e+1));var t}function c(e){return e instanceof RegExp?e:new RegExp("/[".concat(-1<"[\\^$.|?*+()".indexOf(e=e)?"\\".concat(e):e,"]/"))}var l={__nextCharOptional__:!0},f={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":l,X:/./};function s(e,t){var r=1<arguments.length&&void 0!==t?t:f;return e.map(function(e,t,n){e=r[e]||e,t=n[t-1],t=r[t]||t;return e===l?null:t===l?u(c(e)):e}).filter(Boolean)}function p(e,t){t=1<arguments.length&&void 0!==t?t:f;return s(e.split(""),t)}function d(e){return!(e instanceof HTMLInputElement)&&e.querySelector("input")||e}var n,t,h=function(e){return"function"==typeof e},v=function(e){return"string"==typeof e},y=(n=new Map,t={previousValue:"",mask:[]},{partiallyUpdate:function(e,t){n.set(e,i(i({},g(e)),t))},remove:function(e){n.delete(e)},get:g});function g(e){return n.get(e)||i({},t)}function m(e,t){var n=1<arguments.length&&void 0!==t&&t,r=e.value,o=y.get(e),i=o.previousValue,t=o.mask,o=r.length>i.length;(n||r&&r!==i&&o)&&t&&(o=a(r,t,{guide:!1}).conformedValue,e.value=o,o=t=e,(t=document.createEvent("HTMLEvents")).initEvent("input",!0,!0),o.dispatchEvent(t)),y.partiallyUpdate(e,{previousValue:r})}function b(e,t,n){t=Array.isArray(t)?function(e,t){t=1<arguments.length&&void 0!==t?t:f;return s(e.map(function(e){return e instanceof RegExp?e:"string"==typeof e?e.split(""):null}).filter(Boolean).reduce(function(e,t){return e.concat(t)},[]),t)}(t,n):!h(t)&&v(t)&&0<t.length?p(t,n):t;y.partiallyUpdate(e,{mask:t})}function O(e){return(Array.isArray(e)?e:[e]).filter(function(e){return v(e)||e instanceof RegExp}).toString()}function k(e){var e=0<arguments.length&&void 0!==e?e:{},r=function(r,e){return e=1<arguments.length&&void 0!==e?e:f,null===r||Array.isArray(r)||"object"!==N(r)?e:Object.keys(r).reduce(function(e,t){var n=r[t];return null===n||n instanceof RegExp?i(i({},e),{},o({},t,n)):e},e)}(e&&e.placeholders);return{bind:function(e,t){t=t.value;b(e=d(e),t,r),m(e)},componentUpdated:function(e,t){var n=t.value,t=t.oldValue;e=d(e);t=h(n)||O(t)!==O(n);t&&b(e,n,r),m(e,t)},unbind:function(e){e=d(e),y.remove(e)}}}function w(e,t){return t=p(t),v(e)||Number.isFinite(e)?a("".concat(e),t,{guide:!1}).conformedValue:e}function j(e){e.directive("mask",k(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})),e.filter("VMask",w)}var x=k();e.VueMaskDirective=x,e.VueMaskFilter=w,e.VueMaskPlugin=j,e.default=j,Object.defineProperty(e,"__esModule",{value:!0})});